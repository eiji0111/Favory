<% provide(:title, "女性会員一覧（管理者）") %>
<div class="container">
  <div class="row">
    <nav class="col-12 col-md-3 bg-light sidebar py-3 mb-3 rounded">
      <div class="sidebar-sticky">
        <%= search_form_for @q, url: admin_women_path do |f| %>
        <div class="col mb-3">
          <%= f.label :sorts, ' 並び替え', class: 'fas fa-search' %>
          <%= f.select( :sorts, { '並び替え': 'id asc', '新着順': 'created_at desc', '年齢順（若い順）': 'birthday desc' },
                                { onchange: 'this.form.submit()'}, class: 'form-control form-control-sm') %>
        </div>
        <div class="col-12 fas fa-search mb-1"> 詳細検索</div>
        <div class="col mb-3">
          <%= f.label :id, "ID" %>
          <%= f.search_field :id_eq, class: 'form-control form-control-sm' %>
        </div>
        <div class="col mb-3">
          <%= f.label :name, "名前" %>
          <%= f.search_field :name_cont, class: 'form-control form-control-sm' %>
        </div>
        <div class="col mb-3">
          <%= f.label :nickname_cont, 'ニックネーム' %>
          <%= f.search_field :nickname_cont, class: 'form-control form-control-sm' %>
        </div>
        <div class="col mb-3">
          <%= f.label :address_eq, "居住地" %>
          <%= f.select :address_eq, Customer.addresses.map{|k, v|[k, v]}, {prompt: "選択してください"}, class: 'form-control form-control-sm' %>
        </div>
        <div class="col mb-3">
          <%= f.label :birthday_to_age_gteq, "年齢", class: 'col-form-label' %>
          <%= f.number_field :birthday_to_age_gteq, class: 'form-control form-control-sm' %>以上
          <%= f.number_field :birthday_to_age_lt, class: 'form-control form-control-sm' %>未満
        </div>
        <div class="col text-center">
          <%= f.submit " 検 索 ", class: 'btn btn-sm btn-outline-info rounded-pill' %>
        </div>
        <% end %>
      </div>
    </nav>
    <div class="col-md-9 ml-sm-auto col-lg-9 px-4">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">会員ID</th>
            <th scope="col">名前</th>
            <th scope="col">年齢</th>
            <th scope="col">住所</th>
            <th scope="col">自衛官承認</th>
            <th scope="col">会員ステータス</th>
          </tr>
        </thead>
        <tbody>
          <% @customers.each do |customer| %>
            <tr>
              <th scope="row" class="align-middle"><%= customer.id %></th>
              <td class="align-middle">
                <%= link_to admin_customer_path(customer) do %>
                  <%= attachment_image_tag customer, :profile_image, size: '50x50', format: "jpeg",
                      fallback: "no-image-woman.jpg", style: 'object-fit: cover;', class: 'rounded-circle' %>
                  <p><%= customer.name %></p>
                <% end %>
              </td>
              <td class="align-middle"><%= customer.age %> 歳</td>
              <td class="align-middle"><%= customer.address %></td>
              <td class="align-middle">
                <% if customer.army_flag? %>
                  <span class="text-success">承認</span>
                <% else %>
                  <span class="text-muted">非承認</span>
                <% end %>
              </td>
              <td class="align-middle">
                <% if customer.is_valid? %>
                  <span class="text-success">有効</span>
                <% else %>
                  <span class="text-muted">無効</span>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col d-flex justify-content-center">
      <%= paginate @customers %>
    </div>
  </div>
</div>
